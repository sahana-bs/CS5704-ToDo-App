{% extends "base.html" %}
{% load static %}
{% block page-title %} Home Page {% endblock %}

{% block link-css %}<link  rel="stylesheet" type="text/css" href="{% static "css/home.css" %}">{% endblock %}


{% block content %}

    <!--Guest user introduction of the website-->
    <div class="brand-introduction">
        <h2> Welcome </h2>
         {% if not request.session.username %}
             <p>TODO Application to manage your tasks. Please Signup to enjoy the services!</p>
        {% endif %}

    </div>

    <!-- Welcome image to VT Marketplace -->
    <div class="slideshow-container">
        <img src={% static "img/vt_image.jpeg" %} alt="vt_image" />
    </div>

    {% if request.session.username and  request.session.role == "regular" %}

        <div class="user-dashboard">
            <div class="home-page-heading">
                <h2> {{ request.session.username }} Dashboard </h2>
            </div>

            <!--Start of the home page content with heading-->
            <div class="home-page-heading">
                <h3> Completed Tasks </h3>
            </div>

            <div class="dashboard-view">
                {% for item in completedtasks %}
                    <div class="dashboard_item">
                        <a href="{% url "library:task-detail" item.id %}" class="link">
                            <img src={% static item.img %} alt="Item1" />
                            <p class = "item-caption"> {{ item.title }} {{ item.rate }}</p>
                        </a>
                    </div>
                {% endfor %}
            </div>

            <div class="home-page-heading">
                <h3> Pending Tasks </h3>
            </div>

            <div class="dashboard-view">

                {% for item in pendingtasks %}
                    <div class="dashboard_item">
                        <a href="{% url "library:task-detail" item.id %}" class="link">
                            <img src={% static item.img %} alt="Item1" />
                            <p class = "item-caption"> {{ item.title }} {{ item.rate }}</p>
                        </a>
                    </div>
                {% endfor %}
            </div>
        </div>

    {% elif request.session.username  and request.session.role == "admin" %}

        <div class="user-dashboard">
            <div class="home-page-heading">
                <h2> {{ request.session.username }} Dashboard </h2>
            </div>

            <!--Start of the home page content with heading-->
            <div class="home-page-heading">
                <h3> Tasks added </h3>
            </div>

            <div class="item-display">
                {% for item in completedtasks %}
                    {% if item.id <= 3 %}
                        <div class="dashboard_item">
                        <a href="{% url "library:task-detail" item.id %}" class="link">
                            <img src={% static item.img %} alt="Item1" />
                            <p class = "item-caption"> {{ item.title }} {{ item.rate }}</p>
                        </a>
                    </div>
                    {% endif %}
                {% endfor %}

            </div>

        <div class="home-page-heading">
               <a href="{% url "library:addtaskItem" %}"><h2> + Add a task </h2></a>
        </div>

    {% endif %}

{% endblock %}